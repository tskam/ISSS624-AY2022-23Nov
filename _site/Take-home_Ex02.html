<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>ISSS624 Applied Geospatial Analytics - Take-home Exercise 2: Regionalisation of Multivariate Water Point Attributes with Non-spatially Constrained and Spatially Constrained Clustering Methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">ISSS624 Applied Geospatial Analytics</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./syllabus.html">Syllabus</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./lesson.html">Lesson Plan</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-take-home-exercise" role="button" data-bs-toggle="dropdown" aria-expanded="false">Take-home Exercise</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-take-home-exercise">    
        <li>
    <a class="dropdown-item" href="./Take-home_Ex01.html">
 <span class="dropdown-text">Take-home Exercise 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Take-home_Ex02.html">
 <span class="dropdown-text">Take-home Exercise 2</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./resources.html">Resources</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#setting-the-scene" id="toc-setting-the-scene" class="nav-link active" data-scroll-target="#setting-the-scene">Setting the Scene</a></li>
  <li><a href="#objectives" id="toc-objectives" class="nav-link" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data">The Data</a>
  <ul class="collapse">
  <li><a href="#apstial-data" id="toc-apstial-data" class="nav-link" data-scroll-target="#apstial-data">Apstial data</a></li>
  <li><a href="#geospatial-data" id="toc-geospatial-data" class="nav-link" data-scroll-target="#geospatial-data">Geospatial data</a></li>
  </ul></li>
  <li><a href="#the-task" id="toc-the-task" class="nav-link" data-scroll-target="#the-task">The Task</a>
  <ul class="collapse">
  <li><a href="#thematic-mapping" id="toc-thematic-mapping" class="nav-link" data-scroll-target="#thematic-mapping">Thematic Mapping</a></li>
  <li><a href="#analytical-mapping" id="toc-analytical-mapping" class="nav-link" data-scroll-target="#analytical-mapping">Analytical Mapping</a></li>
  </ul></li>
  <li><a href="#grading-criteria" id="toc-grading-criteria" class="nav-link" data-scroll-target="#grading-criteria">Grading Criteria</a></li>
  <li><a href="#submission-instructions" id="toc-submission-instructions" class="nav-link" data-scroll-target="#submission-instructions">Submission Instructions</a></li>
  <li><a href="#due-date" id="toc-due-date" class="nav-link" data-scroll-target="#due-date">Due Date</a></li>
  <li><a href="#peer-learning" id="toc-peer-learning" class="nav-link" data-scroll-target="#peer-learning">Peer Learning</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-home Exercise 2: Regionalisation of Multivariate Water Point Attributes with Non-spatially Constrained and Spatially Constrained Clustering Methods</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<section id="setting-the-scene" class="level2">
<h2 class="anchored" data-anchor-id="setting-the-scene">Setting the Scene</h2>
<p>The process of creating regions is called <a href="https://www.researchgate.net/publication/28153673_Supervised_Regionalization_Methods_A_Survey/link/0fcfd5094046b13d35000000/download">regionalisation</a>. A regionalisation is a special kind of clustering where the objective is to group observations which are similar in their statistical attributes, but also in their spatial location. In this sense, regionalization embeds the same logic as standard clustering techniques, but also applies a series of geographical constraints. Often, these constraints relate to connectivity: two candidates can only be grouped together in the same region if there exists a path from one member to another member that never leaves the region. These paths often model the spatial relationships in the data, such as contiguity or proximity. However, connectivity does not always need to hold for all regions, and in certain contexts it makes sense to relax connectivity or to impose different types of geographic constraints.</p>
</section>
<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<p>In this take-home exercise you are required to regionalise Nigeria by using, but not limited to the following measures:</p>
<ul>
<li>Total number of functional water points</li>
<li>Total number of nonfunctional water points</li>
<li>Percentage of functional water points</li>
<li>Percentage of non-functional water points</li>
<li>Percentage of main water point technology (i.e.&nbsp;Hand Pump)</li>
<li>Percentage of usage capacity (i.e.&nbsp;&lt; 1000, &gt;=1000)</li>
<li>Percentage of rural water points</li>
</ul>
</section>
<section id="the-data" class="level2">
<h2 class="anchored" data-anchor-id="the-data">The Data</h2>
<section id="apstial-data" class="level3">
<h3 class="anchored" data-anchor-id="apstial-data">Apstial data</h3>
<p>For the purpose of this assignment, data from <a href="https://www.waterpointdata.org/access-data/">WPdx Global Data Repositories</a> will be used. There are two versions of the data. They are: WPdx-Basic and WPdx+. You are required to use WPdx+ data set.</p>
</section>
<section id="geospatial-data" class="level3">
<h3 class="anchored" data-anchor-id="geospatial-data">Geospatial data</h3>
<p>Nigeria Level-2 Administrative Boundary (also known as Local Government Area) polygon features GIS data will be used in this take-home exercise. The data can be downloaded either from The <a href="https://data.humdata.org/">Humanitarian Data Exchange</a> portal or <a href="https://www.geoboundaries.org/index.html">geoBoundaries</a>.</p>
</section>
</section>
<section id="the-task" class="level2">
<h2 class="anchored" data-anchor-id="the-task">The Task</h2>
<p>The specific tasks of this take-home exercise are as follows:</p>
<ul>
<li>Using appropriate sf method, import the shapefile into R and save it in a simple feature data frame format. Note that there are three Projected Coordinate Systems of Nigeria, they are: EPSG: 26391, 26392, and 26303. You can use any one of them.</li>
<li>Using appropriate tidyr and dplyr methods, derive the proportion of functional and non-functional water point at LGA level (i.e.&nbsp;ADM2).</li>
<li>Combining the geospatial and aspatial data frame into simple feature data frame.</li>
<li>Delineating water point measures functional regions by using conventional hierarchical clustering.</li>
<li>Delineating water point measures functional regions by using spatially constrained clustering algorithms.</li>
</ul>
<section id="thematic-mapping" class="level3">
<h3 class="anchored" data-anchor-id="thematic-mapping">Thematic Mapping</h3>
<ul>
<li>Plot to show the water points measures derived by using appropriate statistical graphics and choropleth mapping technique.</li>
</ul>
</section>
<section id="analytical-mapping" class="level3">
<h3 class="anchored" data-anchor-id="analytical-mapping">Analytical Mapping</h3>
<ul>
<li>Plot functional regions delineated by using both non-spatially constrained and spatially constrained clustering algorithms.</li>
</ul>
</section>
</section>
<section id="grading-criteria" class="level2">
<h2 class="anchored" data-anchor-id="grading-criteria">Grading Criteria</h2>
<p>This exercise will be graded by using the following criteria:</p>
<ul>
<li><p><strong>Geospatial Data Wrangling (20 marks):</strong> This is an important aspect of geospatial analytics. You will be assessed on your ability to employ appropriate R functions from various R packages specifically designed for modern data science such as readr, tidyverse (tidyr, dplyr, ggplot2), sf just to mention a few of them, to perform the entire geospatial data wrangling processes, including. This is not limited to data import, data extraction, data cleaning and data transformation. Besides assessing your ability to use the R functions, this criterion also includes your ability to clean and derive appropriate variables to meet the analysis need. (Warning: All data are like vast grassland full of land mines. Your job is to clear those mines and not to step on them).</p></li>
<li><p><strong>Geospatial Analysis (25 marks):</strong> In this exercise, you are expected to use the appropriate clustering methods and R packages functions introduced in class to regionalise the study area. You will be assessed on your ability to apply the methods learned correctly and efficiently.</p></li>
<li><p><strong>Geovisualisation and Geocommunication (25 marks):</strong> In this section, you will be assessed on your ability to communicate the complex spatial statistics results in business friendly visual representations. This course is geospatial centric, hence, it is important for you to demonstrate your competency in using appropriate geovisualisation techniques to reveal and communicate the findings of your analysis.</p></li>
<li><p><strong>Reproducibility (20 marks):</strong> This is an important learning outcome of this exercise. You will be assessed on your ability to provide a comprehensive documentation of the analysis procedures in the form of code chunks of Markdown. It is important to note that it is not enough by merely providing the code chunk without any explanation on the purpose and R function(s) used.</p></li>
<li><p><strong>Bonus (10 marks):</strong> Demonstrate your ability to employ methods beyond what you had learned in class to gain insights from the data. The methods used must be geospatial in nature.</p></li>
</ul>
</section>
<section id="submission-instructions" class="level2">
<h2 class="anchored" data-anchor-id="submission-instructions">Submission Instructions</h2>
<ul>
<li>The write-up of the take-home exercise must be in <strong>Quarto html document</strong> format. You are required to publish the write-up on <a href="https://www.netlify.com/"><strong>Netlify</strong></a>.</li>
<li>The R project of the take-home exercise must be pushed onto your <a href="https://github.com/">Github</a> repository.</li>
<li>You are required to provide the links to Netlify service of the take-home exercise write-up and github repository on eLearn.</li>
</ul>
</section>
<section id="due-date" class="level2">
<h2 class="anchored" data-anchor-id="due-date">Due Date</h2>
<p>11th December 2022 (Sunday), 11.59pm (midnight).</p>
</section>
<section id="peer-learning" class="level2">
<h2 class="anchored" data-anchor-id="peer-learning">Peer Learning</h2>
<ul>
<li><p><a href="https://acapgeolano.netlify.app/take-home_ex/take-home_ex1/take-home_ex1">ANICA CLARICE ANTONELLA PASCUAL GALANO</a></p></li>
<li><p><a href="https://feicao.netlify.app/take-home_ex2/take-home_ex2">CAO FEI</a></p></li>
<li><p><a href="https://r4dsa4ga.netlify.app/take-home_ex/take-home_ex2">CHE XUAN</a></p></li>
<li><p><a href="https://isss624chenfx.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">CHEN FANGXIAN</a></p></li>
<li><p><a href="https://isss624rogerchen.netlify.app/take-home_ex/take-home_ex2/take-home_ex2#computing-hierarchical-clustering">CHEN HAOYE ROGER</a></p></li>
<li><p><a href="https://isss624-kathyrnchong.netlify.app/take-home_ex2/take-home_ex2">CHONG JIA HUI KATHYRN KELLYNE</a></p></li>
<li><p><a href="https://mitb-isss624-ackw-gis-analytics.netlify.app/take-home_ex2/take-home_ex2">CHONG KOK WEI ALLAN CHONG</a></p></li>
<li><p><a href="https://isss624-amelia.netlify.app/exercises/take-home_ex2/take-home_ex2">CHUA YAN TING</a></p></li>
<li><p><a href="https://master--hanshuminisss624.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">HAN SHUMIN</a></p></li>
<li><p><a href="https://hulwana-geospatial.netlify.app/take-home_ex/take-home_ex2/take-home_ex2_revised">HULWANA BINTE SAIFULZAMAN</a></p></li>
<li><p><a href="https://kaleidoscopic-bunny-isss624.netlify.app/take-home_ex/take-home_ex2">KWA KAH BOON</a></p></li>
<li><p><a href="https://isss624-leprekonsg.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">LAI WEI SONG</a></p></li>
<li><p><a href="https://gladwin-geospatial-analysis.netlify.app/takehome/takehome2/takehome2">LAM YU HAY GLADWIN</a></p></li>
<li><p><a href="https://gsaiss624.netlify.app/take-home_ex2/take-home_ex2">LE THANH THAO</a></p></li>
<li><p><a href="https://isss624-1stcommit.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">LE TRAN THUY DUNG</a></p></li>
<li><p><a href="https://leecheetian-isss624.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">LEE CHEE TIAN</a></p></li>
<li><p><a href="https://isss624-jonathanley.netlify.app/take-home_ex/take-home%20ex2">LEY MINGHUI JONATHAN</a></p></li>
<li><p><a href="https://geospatialsunshine.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">LIM JUN LING</a></p></li>
<li><p><a href="https://lins-92-isss624.netlify.app/take-home_ex02/take-home_ex02">LIN SHUYAN</a></p></li>
<li><p><a href="https://lohsiying.netlify.app/take_home_ex/ex2/take-home-ex2.html">LOH SI YING</a></p></li>
<li><p><a href="https://isss624jeffreylowps.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">LOW POH SING JEFFREY</a></p></li>
<li><p><a href="">LYNN KWONG</a></p></li>
<li><p><a href="https://jordan-isss624-geospatial.netlify.app/posts/geo/geospatial_nigeriasegmentation/">ONG ZHI RONG JORDAN</a></p></li>
<li><p><a href="https://isss624-zy.netlify.app/take-home_ex2/take-home_ex2">QUAH ZONG YOU</a></p></li>
<li><p><a href="https://raveenageospatial.netlify.app/takehomeex/ex2">RAVEENA CHAKRAPANI</a></p></li>
<li><p><a href="https://isss624-ridhicar.netlify.app/take-home_ex/take-home_ex1/take-home_ex1">RIDHICA RANGARAJAN</a></p></li>
<li><p><a href="https://isss624-ridh27.netlify.app/take_home_ex/take_home_ex2/take_home_ex2">RIDHIMA BANSAL</a></p></li>
<li><p><a href="https://isss624-sjynic.netlify.app/take_home_ex2/take_home_ex2">SEAH JIAN YUAN NICHOLAS</a></p></li>
<li><p><a href="https://sxingxian-geo.netlify.app/takehome_ex/th_ex2/">SEAH XING XIAN</a></p></li>
<li><p><a href="https://isss624gbshao.netlify.app/take-home_ex2/take-home_ex2">SHAO GUANBO</a></p></li>
<li><p><a href="">SHI CHEE LIANG</a></p></li>
<li><p><a href="https://geospatialanalytics-by-yogendra2.netlify.app/takehome_ex02/takehome_ex02_updated">SHINDE YOGENDRA SUNIL</a></p></li>
<li><p><a href="https://isss624shubhanshi.netlify.app/take-home/take-home_ex1/take-home_ex1">SHUBHANSHI RADHEY SHYAM JANGID</a></p></li>
<li><p><a href="https://geospatial-analytics.netlify.app/take%20home%20exercise/take%20home%20exercise%202/take_home_ex02">SOE HTET</a></p></li>
<li><p><a href="https://isss624-mitbsunyp.netlify.app/take-home_ex2/take-home_ex2">SUN YIPING</a></p></li>
<li><p><a href="https://tanguohao.netlify.app/take-home_ex/take-home_ex2">TAN GUOHAO</a></p></li>
<li><p><a href="https://funny-hummingbird-yytan217.netlify.app/take-home%20exercises/take-home_ex2/take-home_ex2">TAN YI YING</a></p></li>
<li><p><a href="">TAN ZEXEONG</a></p></li>
<li><p><a href="">TAO MEIZHU</a></p></li>
<li><p><a href="https://isss624wangqi.netlify.app/take-home_ex2/take-home_ex2">WANG QI</a></p></li>
<li><p><a href="https://isss624yizhi.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">WANG YIZHI</a></p></li>
<li><p><a href="https://isss624bw.netlify.app/takehome/takehomeex2/takehomeex2">WONG SHU MING BELINDA</a></p></li>
<li><p><a href="">XU SIYI</a></p></li>
<li><p><a href="https://f4sared.netlify.app/take_home_ex/ex_2/ex_2.html">YAN LICHENG</a></p></li>
<li><p><a href="https://isss624yjy.netlify.app/take-home_ex2/take-home_ex2">YANG JINGYUAN</a></p></li>
<li><p><a href="https://isss624mq.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">YANG MINGQI</a></p></li>
<li><p><a href="https://isss624-yty.netlify.app/take-home_ex2/take-home_ex2">YANG TIANYI</a></p></li>
<li><p><a href="https://isss624zh.netlify.app/take-home_ex/take-home%20ex2/take-home_ex2">ZENG HANG</a></p></li>
<li><p><a href="https://isss624zoe.netlify.app/take_home_ex2/take_home_ex2">ZHANG YI</a></p></li>
<li><p><a href="https://isss624zhaoyuetong.netlify.app/take-home_ex/take-home_ex2/take-home_exercise2">ZHAO YUETONG</a></p></li>
<li><p><a href="https://isss624-zkd.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">ZHENG KEDAN</a></p></li>
<li><p><a href="https://vermillion-lamington-9e3f61.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">ZHENG YIMIN</a></p></li>
<li><p><a href="https://isss624agaa.netlify.app/take_home_ex2/take_home_ex2">ZHU FANGYUAN</a></p></li>
<li><p><a href="https://yiting-is-learning-geospatial.netlify.app/take-home_ex/take-home_ex2/take-home_ex2">ZHU YITING</a></p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>